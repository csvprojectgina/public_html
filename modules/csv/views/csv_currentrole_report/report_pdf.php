<?phpinclude_once(APPPATH . "libraries/mpdf60/mpdf.php");$mpdf = new mPDF();$title = 'ស្ថិតិមុខតំណែងមន្រ្តីរាជការបម្រើការងារថ្នាក់មន្ទីរាជធានីខេត្ត';$mpdf->simpleTables = true;$mpdf->useSubstitutions = false;$mpdf->incrementFPR1 = 1;ini_set('memory_limit', '100024M');set_time_limit(80000);$header = '<table width="100%" style="border-bottom: 1px solid #000000; vertical-align: bottom; font-family: khmermef2; font-size: 9pt; color: #10517F;"><tr>                <td width="33%">ក្រសួងរៀបចំដែនដី នគរូបនីយកម្ម និងសំណង់<span style="font-size:10pt;"></td>                <td></td>                <td width="33%" style="text-align: right;"><span style="font-weight: bold;"></span></td>                </tr></table>';$footer = '<table width="100%" style="border-bottom: 1px solid #000000; vertical-align: bottom; font-family: khmermef2; font-size: 9pt; color: #10517F;"><tr>            <td width="30%"><span style="font-size:10pt;"></td>            </tr></table>            <table  width="100%" style="border-bottom: 0px solid #000000; vertical-align: bottom; font-family: khmermef2; font-size: 9pt; color: #10517F;"><tr>            <td width="33%" style="text-align: right;"><span style="font-weight: bold;">{PAGENO}/{nb}</span></td>            </tr></table>';$html = '';$html .= '<p style="font-family: khmermef2;text-align: center;font-size: 15px">' . $title . '</p>';$total_r1 = 0;$total_r1_f = 0;$total_r2 = 0;$total_r2_f = 0;$total_r3 = 0;$total_r3_f = 0;$total_r4 = 0;$total_r4_f = 0;$total_r5 = 0;$total_r5_f = 0;$total_r6 = 0;$total_r6_f = 0;$total_r7 = 0;$total_r7_f = 0;$total_r8 = 0;$total_r8_f = 0;$total_r9 = 0;$total_r9_f = 0;$total_r10 = 0;$total_r10_f = 0;$total_r11 = 0;$total_r11_f = 0;$total_r12 = 0;$total_r12_f = 0;$total_r13 = 0;$total_r13_f = 0;$total_r14 = 0;$total_r14_f = 0;$total_r15 = 0;$total_r15_f = 0;$total_r16 = 0;$total_r16_f = 0;$total_r17 = 0;$total_r17_f = 0;$total_r18 = 0;$total_r18_f = 0;$total_r19 = 0;$total_r19_f = 0;$total_r20 = 0;$total_r20_f = 0;$total_r21 = 0;$total_r21_f = 0;$total_r22 = 0;$total_r22_f = 0;$total_r23 = 0;$total_r23_f = 0;$total_r24 = 0;$total_r24_f = 0;$total_r25 = 0;$total_r25_f = 0;$str = '<table  border="0" cellpadding="3" cellspacing="0" style="border: 2px solid blue;border-collapse: collapse;font-family: KhmerOS; width: 100%; text-align: center;" >        <thead>            <tr>                <th  style="border: 1px solid blue; font-family:KhmerOS ; height: 45px;" rowspan="3" width="35">ល.រ</th>                <th style="text-align: center;font-family:KhmerOS;  " rowspan="3" width="180">អង្គភាព</th>                <th style="text-align: center;font-family:KhmerOS; font-size:12px " colspan="4" >ថ្នាក់ដឹកនាំមន្ទីរ ដ.ន.ស.ស រាជ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="6">ថ្នាក់ដឹកនាំការិយាល័យចំណុះមន្ទីរ</th>                <th style="text-align: center;font-family:KhmerOS;font-size:12px " colspan="2" rowspan="2">មន្ត្រីកម្មសិក្សា</th>                                <th style="text-align: center;font-family:KhmerOS;font-size:12px " colspan="2" rowspan="2">មន្ត្រីកិច្ចសន្យា</th>                <th style="text-align: center;font-family:KhmerOS;font-size:12px " colspan="6" >ថ្នាក់ដឹកនាំការិយាល័យ ដ.ស.ន.ភ ក្រុង-ស្រុក-ខណ្ឌ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2" rowspan="2" class="bg-primary text-white">សរុបរួម</th>            </tr>            <tr>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2" >ប្រធានមន្ទីរ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">អនុប្រធានមន្ទីរ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">ប្រធានការិយាល័យ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">អនុប្រធានការិយាល័យ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">មន្ត្រី</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">ប្រធានការិ.ដនសភ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">អនុប្រធានការិ.ដនសភ</th>                <th style="text-align: center;font-family:KhmerOS ;font-size:12px" colspan="2">មន្ត្រីការិ.ដនសភ</th>            </tr>            <tr style="vertical-align: middle;">                <th width="40" style="text-align: center; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                <th  width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>                                <th  width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">សរុប</th>                <th width="40" style="text-align: center ; font-family:KhmerOS ;font-size:12px">ស្រី</th>            </tr>        </thead>';$str .= '  <tbody>            <tr>                <td>1</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px">រាជធានីភ្នំពេញ</td>';foreach ($get_currentrole as $current_role) :    $total_r[$current_role->id] = 0;    $total_rf[$current_role->id] = 0;    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=31		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=31		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r1 += $query->row()->total;    $total_r1_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r1 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r1_f . '</td>';$str .= ' </tr>            <tr>                <td>2</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តបន្ទាយមានជ័យ</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=2		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=2		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r2 += $query->row()->total;    $total_r2_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r2 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r2_f . '</td>';$str .= ' </tr>            <tr>                <td>3</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តបាត់ដំបង​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=3		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=3		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r3 += $query->row()->total;    $total_r3_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r3 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r3_f . '</td>';$str .= ' </tr>            <tr>                <td>4</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកំពង់ចាម</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=4		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=4		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r4 += $query->row()->total;    $total_r4_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r4 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r4_f . '</td>';$str .= '    </tr>            <tr>                <td>5</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកំពង់ឆ្នាំង​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=5		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=5		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r5 += $query->row()->total;    $total_r5_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r5 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r5_f . '</td>';$str .= '  </tr>            <tr>                <td>6</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកំពង់ស្ពឺ​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=6		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=6		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r6 += $query->row()->total;    $total_r6_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r6 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r6_f . '</td>';$str .= '  </tr>            <tr>                <td>7</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកំពង់ធំ​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=7		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=7		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r7 += $query->row()->total;    $total_r7_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r7 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r7_f . '</td>';$str .= '  </tr>            <tr>                <td>8</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកំពត</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=8		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=8		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r8 += $query->row()->total;    $total_r8_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r8 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r8_f . '</td>';$str .= '</tr>            <tr>                <td>9</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកណ្តាល</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=9		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=9		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r9 += $query->row()->total;    $total_r9_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_r[$current_role->id] += $row->total;        $total_rf[$current_role->id] += $row->female;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r9 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r9_f . '</td>';$str .= ' </tr>            <tr>                <td>10</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកែប</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=10		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=10		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r10 += $query->row()->total;    $total_r10_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r10 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r10_f . '</td>';$str .= ' </tr>            <tr>                <td>11</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តកោះកុង</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=11		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=11		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r11 += $query->row()->total;    $total_r11_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r11 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r11_f . '</td>';$str .= ' </tr>            <tr>                <td>12</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តក្រចេះ</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=12		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=12		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r12 += $query->row()->total;    $total_r12_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r12 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r12_f . '</td>';$str .= '   </tr>            <tr>                <td>13</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តមណ្ឌលគិរី</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=13		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=13		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r13 += $query->row()->total;    $total_r13_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r13 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r13_f . '</td>';$str .= '   </tr>            <tr>                <td>14</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តឧត្តរមានជ័យ</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=14		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=14		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r14 += $query->row()->total;    $total_r14_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r14 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r14_f . '</td>';$str .= ' </tr>            <tr>                <td>15</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តប៉ៃលិន</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=15		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=15		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r15 += $query->row()->total;    $total_r15_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r15 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r15_f . '</td>';$str .= '     </tr>            <tr>                <td>16</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តព្រះសីហនុ</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=16		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=16		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r16 += $query->row()->total;    $total_r16_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r16 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r16_f . '</td>';$str .= '   </tr>            <tr>                <td>17</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្ត​ព្រះវិហារ​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=17		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=17		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r17 += $query->row()->total;    $total_r17_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r17 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r17_f . '</td>';$str .= '  </tr>            <tr>                <td>18</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តព្រៃវែង​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=18		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=18		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r18 += $query->row()->total;    $total_r18_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r18 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r18_f . '</td>';$str .= '  </tr>            <tr>                <td>19</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តពោធិ៍សាត់</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=19		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=19		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r19 += $query->row()->total;    $total_r19_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r19 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r19_f . '</td>';$str .= ' </tr>            <tr>                <td>20</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តរតនគិរី</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=20		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=20		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r20 += $query->row()->total;    $total_r20_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r20 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r20_f . '</td>';$str .= ' </tr>            <tr>                <td>21</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តសៀមរាប</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=21		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=21		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r21 += $query->row()->total;    $total_r21_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r21 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r21_f . '</td>';$str .= '  </tr>            <tr>                <td>22</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តស្ទឹងត្រែង​</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=22		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=22		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r22 += $query->row()->total;    $total_r22_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r22 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r22_f . '</td>';$str .= '    </tr>            <tr>                <td>23</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តស្វាយរៀង</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=23		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=23		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r23 += $query->row()->total;    $total_r23_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r23 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r23_f . '</td>';$str .= ' </tr>            <tr>                <td>24</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តតាកែវ</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=24		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=24		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r24 += $query->row()->total;    $total_r24_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r24 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r24_f . '</td>';$str .= ' </tr>            <tr>                <td>25</td>                <td style="text-align: left;  font-family:KhmerOS ;font-size:13px"> ខេត្តត្បូងឃ្មុំ</td>';foreach ($get_currentrole as $current_role) :    $query = $this->db->query("SELECT	(		SELECT DISTINCT			COUNT(w.id)		FROM			`work` AS w		INNER JOIN civilservant AS ci ON ci.id = w.id		INNER JOIN currentrole AS cr ON cr.id = w.current_role_id		WHERE			w.unit=25		AND w.current_role_id ={$current_role->id}	) AS total,	count(gender) AS femaleFROM	`work` AS wINNER JOIN civilservant AS ci ON ci.id = w.idINNER JOIN currentrole AS cr ON cr.id = w.current_role_idWHERE		w.unit=25		AND w.current_role_id ={$current_role->id}AND gender = 'ស្រី'");    $total_r25 += $query->row()->total;    $total_r25_f += $query->row()->female;    foreach ($query->result() as $row) {        $total_rf[$current_role->id] += $row->female;        $total_r[$current_role->id] += $row->total;        $str .= '<td style="text-align:center;">' . $row->total . '</td>';        $str .= '<td style="text-align:center;">' . $row->female . '</td>';    }endforeach;$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r25 . '</td>';$str .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r25_f . '</td>';$str .= '</tr>        </tbody>        <tfoot>            <tr>                <th colspan="2"  style="text-align: center;  font-family:KhmerOS ;font-size:13px"> សរុប</th>';foreach ($get_currentrole as $current_role) :    $str .= '<th style="text-align:center;" class="bg-primary text-white">' . $total_r[$current_role->id] . ' </th>';    $str .= '<th style="text-align:center;" class="bg-primary text-white">' . $total_rf[$current_role->id] . '</th>';endforeach;$str .= '<th style="text-align:center;" class="bg-primary text-white">';$totalamount = 0;foreach ($get_currentrole as $current_role) :    $totalamount += $total_r[$current_role->id];endforeach;$str.= $totalamount;$str .= '</th> <th style="text-align:center;" class="bg-primary text-white">';$totalamountf = 0;foreach ($get_currentrole as $current_role) :    $totalamountf += $total_rf[$current_role->id];endforeach;$str .= $totalamountf;$str .= '</th></tr> </tfoot></table>';$html.=$str;//$mpdf->SetHTMLHeader($header);//$mpdf->SetHTMLFooter($footer);$mpdf->AddPage('L', 'A4', '', '', '', '2', '2', '0', '0', '0','0');$mpdf->WriteHTML($html);$mpdf->Output();exit();