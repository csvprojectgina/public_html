<?phpinclude_once(APPPATH . "libraries/mpdf60/mpdf.php");$mpdf = new mPDF();$title = 'ស្ថិតិមុខតំណែងមន្រ្តីរាជការបម្រើការងារក្នុងទីស្តីការក្រសួង';$mpdf->simpleTables = true;$mpdf->useSubstitutions = false;$mpdf->incrementFPR1 = 1;ini_set('memory_limit', '100024M');set_time_limit(80000);$total_r1 = 0;$total_r1_f = 0;$total_r2_f = 0;$total_r2 = 0;$total_r3 = 0;$total_r3_f = 0;$total_r4 = 0;$total_r4_f = 0;$total_r5 = 0;$total_r5_f = 0;$total_r6 = 0;$total_r6_f = 0;$total_r7 = 0;$total_r7_f = 0;$total_r8 = 0;$total_r8_f = 0;$total_r9 = 0;$total_r9_f = 0;$total_r10 = 0;$total_r10_f = 0;$total_r11 = 0;$total_r11_f = 0;$header = '<table width="100%" style="border-bottom: 1px solid #000000; vertical-align: bottom; font-family: khmermef2; font-size: 9pt; color: #10517F;"><tr>                <td width="33%">ក្រសួងរៀបចំដែនដី នគរូបនីយកម្ម និងសំណង់<span style="font-size:10pt;"></td>                <td></td>                <td width="33%" style="text-align: right;"><span style="font-weight: bold;"></span></td>                </tr></table>';$footer = '<table width="100%" style="border-bottom: 1px solid #000000; vertical-align: bottom; font-family: khmermef2; font-size: 9pt; color: #10517F;"><tr>            <td width="30%"><span style="font-size:10pt;"></td>            </tr></table>            <table  width="100%" style="border-bottom: 0px solid #000000; vertical-align: bottom; font-family: khmermef2; font-size: 9pt; color: #10517F;"><tr>            <td width="33%" style="text-align: right;"><span style="font-weight: bold;">{PAGENO}/{nb}</span></td>            </tr></table>';$html = '<br>';$html .= '<p style="font-family: khmermef2;text-align: center;font-family:khmermef2;font-size: 18px">' . $title . '</p>';$html .= '<br>';$html .= '<br>';$body = ' <table  border="0" cellpadding="3" cellspacing="0" style="border: 2px solid blue;border-collapse: collapse;font-family: KhmerOS; width: 100%;" >        <thead>            <tr>                <th style="border: 1px solid blue; font-family:KhmerOS ;" rowspan="2" >លរ</th>                <th style="text-align: center;font-family:KhmerOS; width: 320px" rowspan="2">អង្គភាព</th>                <th style="text-align: center;font-family:KhmerOS;  width: 80px" colspan="2" class="rotate-45"><div><span>រដ្ឋមន្ត្រី</span></div></th>                <th style="text-align: center;font-family:KhmerOS;​​  width: 100px" colspan="2" class="rotate-45"><div><span>រដ្ឋលេខាធិការ</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 110px"colspan="2" colspan="2" class="rotate-45"><div><span>អនុរដ្ឋលេខាធិការ</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2" class="rotate-45"><div><span>ទីប្រឹក្សា</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2" class="rotate-45"><div><span>អគ្គនាយក</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2" class="rotate-45"><div><span>អគ្គនាយករង</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2" class="rotate-45"><div><span>ប្រធាននាយកដ្ឋាន </span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px" colspan="2" colspan="2" class="rotate-45"><div><span>អនុប្រធាននាយកដ្ឋាន</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2" class="rotate-45"><div><span>ប្រធានការិយាល័យ</span></div></th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2" class="rotate-45"><div><span>អនុប្រធានការិយាល័យ</span></div></th><!--                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2">ប្រធានមន្ទីរ</th>                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2">អនុប្រធានមន្ទីរ</th>--><!--                <th style="text-align: center;font-family:KhmerOS; width: 100px"colspan="2" colspan="2">អគ្គាធិការ</th>                <th style="text-align: center;font-family:KhmerOS; width: 100px; "colspan="2" colspan="2">អគ្គាធិការរង</th>-->                <th style="text-align: center;font-family:KhmerOS; width: 80px "colspan="2" colspan="2" class="rotate-45"><div><span>មន្ត្រី</span></div></th>                <!--<th style="text-align: center;font-family:KhmerOS;  width: 100px;  "colspan="2" colspan="2">មន្ត្រីកិច្ចសន្យា</th>-->                 <th style="text-align: center;font-family:KhmerOS;  width: 100px;  "colspan="2" colspan="2" class="rotate-45"><div><span>មន្ត្រីជាប់កិច្ចសន្យា</span></div></th>                <th style="text-align: center;font-family:KhmerOS;  width: 100px;  "colspan="2" colspan="2" class="rotate-45"><div><span>មន្ត្រីកម្មសិក្សា </span></div></th>                <th style="text-align: center;font-family:KhmerOS;  width: 100px;  "colspan="2" colspan="2" class="rotate-45"><div><span>ជំនួយ​រដ្ឋលេខាធិការ  </span></div></th>                <th style="text-align: center;font-family:KhmerOS;"colspan="2" colspan="2" class="rotate-45" ><div><span>សរុបរួម</span></div></th>                                <!-- <th style="text-align: center;font-family:KhmerOS;"colspan="2">រដ្ឋលេខាធិការ</th>                <th style="text-align: center;font-family:KhmerOS;"colspan="2"colspan="2">អនុរដ្ឋលេខាធិការ</th>                <th style="text-align: center;font-family:KhmerOS;"colspan="2" colspan="2">ទីប្រឹក្សា</th>                                            <th style="text-align: center;font-family:KhmerOS;"colspan="2" colspan="2">មន្ត្រីកិច្ចសន្យា</th> -->            </tr>            <tr style="vertical-align: middle;">                <th style="text-align: center;font-family:KhmerOS; width: 40px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 40px">ស្រី</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>              <th style="text-align: center;font-family:KhmerOS; width: 55px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 55px">ស្រី</th>            <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>              <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>               <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>               <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>              <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>            <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>              <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>            <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>               <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>            <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>              <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th><!--                <th>សរុប</th> <th>ស្រី</th>-->             <th style="text-align: center;font-family:KhmerOS; width: 50px">សរុប</th>                <th style="text-align: center;font-family:KhmerOS; width: 50px">ស្រី</th>            </tr>        </thead>        <tbody>';$body .= '  <tr>                <td>1</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">ថ្នាក់ដឹកនាំ</td>';foreach ($get_currentrole as $row) {    $total_ro_all[$row->id] = 0;    $total_ro_female[$row->id] = 0;}foreach ($get_currentrole_leader as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r1 += $query->row()->total;    $total_r1_f += $query->row()->female;    foreach ($query->result() as $rowtotal) {        $body .= '<td style="text-align:center;">' . $rowtotal->total . '</td>';        $body .= '<td style="text-align:center;">' . $rowtotal->female . '</td>';    }}//                /* total and total female *///                $query_total_female = $this->db->query("//                        SELECT//                        (//                            SELECT DISTINCT//                                COUNT(w.id)//                            FROM//                                `work` AS w//                            INNER JOIN civilservant AS ci ON ci.id = w.id//                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id//                        ) AS total,//                        count(gender) AS female//                    FROM//                        `work` AS w//                    INNER JOIN civilservant AS ci ON ci.id = w.id//                    INNER JOIN currentrole AS cr ON cr.id = w.current_role_id//                    AND gender = 'ស្រី'//                        ");/* total and total female */$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class=" text-white"></td>';$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r1 . '</td>';$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r1_f . '</td>';$body .= '            </tr>            <tr>                <td>2</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">អគ្គនាយកដ្ឋានរដ្ឋបាល</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 7                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 7                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r2 += $query->row()->total;    $total_r2_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= '  <td style="text-align:center;" class="bg-primary text-white">' . $total_r2 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r2_f . '</td>            </tr>            <tr>                <td>3</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">អគ្គនាយកដ្ឋានសំណង់</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 3                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 3                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r3 += $query->row()->total;    $total_r3_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= ' <td style="text-align:center;" class="bg-primary text-white">' . $total_r3 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r3_f . '</td>            </tr>            <tr>                <td>4</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">អគ្គនាយកដ្ឋានរៀបចំដែនដី និងនគរូបនីយកម្ម</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 2                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 2                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r4 += $query->row()->total;    $total_r4_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r4 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r4_f . '</td>            </tr>            <tr>                <td>5</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">អគ្គនាយកដ្ឋានសុរិយោដី និងភូមិសាស្រ្ត</td>               ';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 8                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 8                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r5 += $query->row()->total;    $total_r5_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= ' <td style="text-align:center;" class="bg-primary text-white">' . $total_r5 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r5_f . '</td>            </tr>            <tr>                <td>6</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">អគ្គនាយកដ្ឋានលំនៅឋាន</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 9                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 9                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r6 += $query->row()->total;    $total_r6_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r6 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r6_f . '</td>            </tr>            <tr>                <td>7</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">អគ្គាធិការដ្ឋាន​</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 10                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN general_departments AS gd ON gd.general_dep_id = w.general_department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                gd.general_dep_id = 10                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r7 += $query->row()->total;    $total_r7_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r7 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r7_f . '</td>            </tr>            <tr>                <td>8</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">មជ្ឈមណ្ឌលបណ្តុះបណ្តាលវិជ្ជាជីវៈ</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN tbl_departments AS dp ON dp.d_id = w.department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                dp.d_id = 111                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN tbl_departments AS dp ON dp.d_id = w.department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                dp.d_id = 111                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r8 += $query->row()->total;    $total_r8_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= ' <td style="text-align:center;" class="bg-primary text-white">' . $total_r8 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r8_f . '</td>            </tr>            <tr>                <td>9</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">នាយកដ្ឋានសវនកម្មផ្ទៃក្នុង</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN tbl_departments AS dp ON dp.d_id = w.department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                dp.d_id = 112                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN tbl_departments AS dp ON dp.d_id = w.department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                dp.d_id = 112                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r9 += $query->row()->total;    $total_r9_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= ' <td style="text-align:center;" class="bg-primary text-white">' . $total_r9 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r9_f . '</td>            </tr>            <tr>                <td>10</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px">មន្ទីរពិសោធន៍</td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN tbl_departments AS dp ON dp.d_id = w.department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                dp.d_id = 113                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                            INNER JOIN tbl_departments AS dp ON dp.d_id = w.department                            INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                                dp.d_id = 113                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r10 += $query->row()->total;    $total_r10_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r10 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r10_f . '</td>            </tr><tr>                <td>11</td>                <td style="font-family: khmermef1;text-align: left;font-size: 18px;height:40px"></td>';foreach ($get_currentrole as $row) {    $query = $this->db->query("SELECT                        (                            SELECT DISTINCT                                COUNT(w.id)                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                                    INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                             w.general_department ='' AND                                ( w.department ='' OR  w.department BETWEEN 114 AND 118)                                AND w.current_role_id NOT BETWEEN 1 AND 4                            AND w.current_role_id = {$row->id}  AND  w.unit= '1'                        ) AS total,                            count(gender) AS female                            FROM                                `work` AS w                            INNER JOIN civilservant AS ci ON ci.id = w.id                                                       INNER JOIN currentrole AS cr ON cr.id = w.current_role_id                            WHERE                            w.general_department ='' AND                                ( w.department ='' OR  w.department BETWEEN 114 AND 118)                                AND w.current_role_id NOT BETWEEN 1 AND 4                            AND w.current_role_id ={$row->id}  AND  w.unit= '1'                            AND gender = 'ស្រី'");    $total_ro_all[$row->id] += $query->row()->total;    $total_ro_female[$row->id] += $query->row()->female;    $total_r11 += $query->row()->total;    $total_r11_f += $query->row()->female;    foreach ($query->result() as $row) {        $body .= '<td style="text-align:center;">' . $row->total . '</td>';        $body .= '<td style="text-align:center;">' . $row->female . '</td>';    }}$body .= '<td style="text-align:center;" class="bg-primary text-white">' . $total_r11 . '</td>                <td style="text-align:center;" class="bg-primary text-white">' . $total_r11_f . '</td>            </tr>        </tbody>        <tfoot>            <tr>                <th colspan="2";font-size: 18pt;height:40px>សរុប</th>           ';foreach ($get_currentrole as $row) {    $body .= '<th> ' . $total_ro_all[$row->id] . '</th>';    $body .= '<th>' . $total_ro_female[$row->id] . '</th>';}$body .= '<th>' . array_sum($total_ro_all) . '</th>';$body .= ' <th>' . array_sum($total_ro_female) . '</th>';$body .= ' </tr>        </tfoot>    </table>';$html .= $body;$mpdf->SetHTMLHeader($header);$mpdf->SetHTMLFooter($footer);$mpdf->AddPage('L', 'A4', '', '', '', '5', '5', '10', '0', '3', '0');$mpdf->WriteHTML($html);$mpdf->Output();exit();